{"version":3,"file":"ngx-alerts.js","sources":["../../../projects/ngx-alerts/src/lib/alert.config.ts","../../../projects/ngx-alerts/src/lib/service/alert.reducer.ts","../../../projects/ngx-alerts/src/lib/service/alert.service.ts","../../../projects/ngx-alerts/src/lib/component/alert.component.ts","../../../projects/ngx-alerts/src/lib/alert.module.ts","../../../projects/ngx-alerts/src/ngx-alerts.ts"],"sourcesContent":["import {AlertConfig} from './model/alert-config.model';\nimport {InjectionToken} from '@angular/core';\n\nexport const ALERT_CONFIG = new InjectionToken<AlertConfig>('config');\n","import {AlertConfig} from '../model/alert-config.model';\nimport {Alert} from '../model/alert.model';\n\n// @dynamic\nexport class AlertReducer {\n\n  public static reduce(state: Alert[], action: { fn: Function, alert: Alert, config: AlertConfig }): Alert[] {\n    return action.fn(state, {alert: action.alert, config: action.config});\n  }\n\n  public static add(state: Alert[], params: {alert: Alert, config: AlertConfig}): Alert[] {\n    const output = [\n      params.alert,\n      ...state\n    ];\n    if (output.length > params.config.maxMessages) {\n      output.pop();\n    }\n    return output;\n  }\n\n  public static remove(state: Alert[], params: {alert: Alert, config: AlertConfig}): Alert[] {\n    return state.filter(alert => alert !== params.alert);\n  }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {Alert} from '../model/alert.model';\nimport {BehaviorSubject, Observable, Subject, timer} from 'rxjs';\nimport {ALERT_CONFIG} from '../alert.config';\nimport {AlertConfig} from '../model/alert-config.model';\nimport {scan, take} from 'rxjs/operators';\nimport {AlertReducer} from './alert.reducer';\n\n@Injectable()\nexport class AlertService {\n\n  private dispatcher = new Subject<{ fn: Function, alert: Alert, config: AlertConfig }>();\n  private state = new BehaviorSubject<Alert[]>([]);\n\n  constructor(@Inject(ALERT_CONFIG) private config: AlertConfig) {\n    this.initConfig();\n    this.dispatcher\n      .pipe(\n        scan(AlertReducer.reduce, [])\n      )\n      .subscribe(this.state);\n  }\n\n  private initConfig(): void {\n    if (!this.config) {\n      this.config = {};\n    }\n    this.config.timeout = !!this.config.timeout ? this.config.timeout : 5000;\n    this.config.maxMessages = !!this.config.maxMessages ? this.config.maxMessages : 5;\n  }\n\n  public get messages(): Observable<Alert[]> {\n    return this.state.asObservable();\n  }\n\n  public info(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'info'});\n  }\n\n  public danger(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'danger'});\n  }\n\n  public success(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'success'});\n  }\n\n  public warning(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'warning'});\n  }\n\n  public close(alert: Alert): void {\n    this.dispatcher.next({fn: AlertReducer.remove, alert: alert, config: this.config});\n  }\n\n  private addAlert(alert: Alert): void {\n    this.dispatcher.next({fn: AlertReducer.add, alert: alert, config: this.config});\n\n    if (this.config.timeout > 0) {\n      timer(this.config.timeout)\n        .pipe(take(1))\n        .subscribe(() => {\n          this.dispatcher.next({fn: AlertReducer.remove, alert: alert, config: this.config});\n        });\n    }\n  }\n}\n","import {ChangeDetectionStrategy, Component, Inject, OnInit} from '@angular/core';\nimport {AlertService} from '../service/alert.service';\nimport {Alert} from '../model/alert.model';\nimport {animate, state, style, transition, trigger} from '@angular/animations';\nimport {Observable} from 'rxjs';\nimport {ALERT_CONFIG} from '../alert.config';\nimport {AlertConfig} from '../model/alert-config.model';\n\n@Component({\n  selector: 'ngx-alerts',\n  templateUrl: './alert.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./alert.component.scss'],\n  animations: [\n    trigger('animationRight', [\n      state('shown', style({transform: 'translateX(0)', opacity: 0.8})),\n      transition(':enter', [\n        style({transform: 'translateX(100%)', opacity: 0}),\n        animate('300ms 100ms ease', style({transform: 'translateX(0)', opacity: 0.8}))\n      ]),\n      transition(':leave', [\n        style({transform: 'translateX(0)', opacity: 0.8}),\n        animate('200ms ease-out', style({transform: 'translateX(100%)', opacity: 0}))\n      ])]\n    ),\n    trigger('animationLeft', [\n      state('shown', style({transform: 'translateX(0)', opacity: 0.8})),\n      transition(':enter', [\n        style({transform: 'translateX(-100%)', opacity: 0}),\n        animate('300ms 100ms ease', style({transform: 'translateX(0)', opacity: 0.8}))\n      ]),\n      transition(':leave', [\n        style({transform: 'translateX(0)', opacity: 0.8}),\n        animate('200ms ease-out', style({transform: 'translateX(-100%)', opacity: 0}))\n      ])]\n    )\n  ]\n})\nexport class AlertComponent implements OnInit {\n\n  alerts: Observable<Alert[]>;\n\n  constructor(\n    @Inject(ALERT_CONFIG) private config: AlertConfig,\n    private alertService: AlertService) {\n    this.initConfig();\n  }\n\n  ngOnInit() {\n    this.alerts = this.alertService.messages;\n  }\n\n  close(alert: Alert) {\n    this.alertService.close(alert);\n  }\n\n  get position() {\n    return this.config.position;\n  }\n\n  private initConfig(): void {\n    if (!this.config) {\n      this.config = {};\n    }\n    this.config.position = !!this.config.position ? this.config.position : 'right';\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {AlertComponent} from './component/alert.component';\nimport {AlertService} from './service/alert.service';\nimport {CommonModule} from '@angular/common';\nimport {ALERT_CONFIG} from './alert.config';\nimport {AlertConfig} from './model/alert-config.model';\n\n@NgModule({\n    declarations: [\n        AlertComponent\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        AlertComponent\n    ]\n})\nexport class AlertModule {\n    static forRoot(config?: AlertConfig): ModuleWithProviders<AlertModule> {\n        return {\n            ngModule: AlertModule,\n            providers: [\n                AlertService,\n                {provide: ALERT_CONFIG, useValue: config}\n            ]\n        };\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {ALERT_CONFIG as ɵa} from './lib/alert.config';\nexport {AlertComponent as ɵb} from './lib/component/alert.component';"],"names":[],"mappings":"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"}